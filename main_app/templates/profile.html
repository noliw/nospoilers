{% extends 'base.html' %}
{% block content %}
<div class="col-6 mx-auto">
  <h1>This is the profile page for {{user.username}}</h1>
  <h4>You own these services: </h4>
</div>
  <div class="d-flex flex-row light-background">


    {% for service in profile.services.all %}
    <form action="{% url 'unassoc_services' profile.id service.id %}" method="POST" class="m-1">
      {% csrf_token %}
      <div class="d-flex flex-column input-group-text lifted p-0 m-0 h-75">
        <img class="h-100 my-1" src="{{service.logo}}">
        <button type="submit" class="btn btn-sm bg-dark bt-outline btn-outline-warning h-100">Remove</button>
      </div>
    </form>
    {% endfor %}
  </div>
    <h3>Available Services</h3>
    
    <div class="d-flex flex-row light-background align-items-center flex-wrap p-1">

      {% for service in unowned_services %}

      <form action="{% url 'assoc_services' profile.id service.id %}" method="POST" class=" m-1 ">
        {% csrf_token %}
        <div class="d-flex flex-column justify-content-between input-group-text dark-background lifted p-0 m-1 h-75">

          <img class="h-100 my-0 p-0 border border-1 rounded-2 border-secondary " src="{{ service.logo }}">
          <button type="submit" class="btn btn-sm bg-dark bt-outline btn-outline-warning h-100 m-0 p-0">Add</button>
        </div>
      </form>
      {% endfor %}
      
    </div>
    {% if group %}
        <a href="{{ group.get_absolute_url }}">group</a>
    {% else %}
    <form action="{% url 'create_group' profile.id %}" method="POST" class="m-1 col-4 mx-auto">
      {% csrf_token %}
      <div class="row mx-auto ">
        <span id="passwordHelpInline" class="form-text">
          4 digit pin
        </span>
        <input type="password" name="pin" id="pin" value="" class="input-group-text col-auto">
        <button type="submit" class="btn btn-sm bg-dark bt-outline btn-outline-warning col-auto">Create Group</button>
      </div>
    </form>
    {% endif %}
    <script>
      const trs = document.querySelectorAll('tr')
      trs.forEach(function (tr) {
        tr.setAttribute('class', 'input-group-text bg-primary light-text')
      })
    </script>
    {% endblock %}
